# OpenSearch Cluster CR (단일 노드 실험 환경용)
# opensearch-operator가 이 CR을 감지하여 OpenSearch 클러스터 생성
apiVersion: opensearch.opster.io/v1
kind: OpenSearchCluster
metadata:
  name: opensearch
  namespace: logging
spec:
  general:
    serviceName: opensearch
    version: 2.17.0
    httpPort: 9200
    pluginsList: []
  
  # 대시보드 설정
  dashboards:
    enable: true
    version: 2.17.0
    replicas: 1
    resources:
      limits:
        cpu: 500m
        memory: 512Mi
      requests:
        cpu: 200m
        memory: 256Mi
  
  # 노드 풀 설정 (단일 노드: master + data + ingest 통합)
  nodePools:
    - component: all-in-one
      replicas: 1
      roles:
        - master
        - data
        - ingest
      persistence:
        emptyDir: {}
      resources:
        limits:
          cpu: 1000m
          memory: 2Gi
        requests:
          cpu: 500m
          memory: 1Gi
      jvm: -Xms1g -Xmx1g
